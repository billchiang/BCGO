#!/bin/bash
INPUT_AFP_PATH="$1"
OUTPUT_PDF_PATH="$2"
FORMAT="$3"

echo "Attempting to convert '$INPUT_AFP_PATH' to '$OUTPUT_PDF_PATH' (format: $FORMAT)..."

# Create parent directory for output if it doesn't exist
mkdir -p "$(dirname "$OUTPUT_PDF_PATH")"

# Simulate conversion by creating an empty output file
# To make it slightly more realistic for the Java code's check (file.length() > 0),
# let's add some minimal content.
echo "Dummy PDF content for $INPUT_AFP_PATH" > "$OUTPUT_PDF_PATH"

if [ -f "$OUTPUT_PDF_PATH" ]; then
    # Check if file has content (not strictly empty)
    if [ -s "$OUTPUT_PDF_PATH" ]; then
        echo "Dummy conversion successful: '$OUTPUT_PDF_PATH' created with content."
        exit 0
    else
        echo "Dummy conversion created an empty file: '$OUTPUT_PDF_PATH'."
        exit 2 # Different error code for empty file
    fi
else
    echo "Dummy conversion failed to create output file."
    exit 1
fi
